DONE:
delay
switch
genrator
flag
source
hold timer (single byte)
hold timer (double byte)
counter auto reset
counter manual reset


cycle=number of cycles for node
n=number of output nodes

hold timer: (double byte) (cycle=n+24)

BTFSS input_state
goto no_rest

MOVLW time/total_cycles_lo
MOVWF counter_lo

MOVLW time/total_cycles_hi
MOVWF counter_hi

goto end_temp

no_rest Delay 5
end_temp

CLEAR W
XORLW counter_lo,W

BTFSC STATUS,Z
goto skip1

CLRF W
XORLW counter_hi,W

BTFSC STATUS,Z
goto skip2

CLRF W
XORWF counter_lo,W
BTFSC STAUTS Z
DECF counter_hi,F
DECF counter_lo,F

BSF output
BSF outputs...
goto end
skip1 Delay 4
skip2 Delay 6+n

end BCF input_state



hold timer: (singluar byte) (cycle=14+n)

BTFSS input_state
goto no_rest
MOVLW time/total_cycles
MOVWF counter
goto end_temp

no_rest NOP
NOP
NOP
end_temp

CLEAR W
XORLW counter,W
BTFSC STATUS,Z
goto skip
DECF counter,F
BSF output
BSF outputs...
goto end
skip Delay n+2
end BCF input_state


counter manual reset: (cycle=15+n)

BTFSC reset_input
CLRF counter_file,F

BTFSS prev_edge
BTFSS input_state
goto no_act

MOVLW upto
XORFW counter_file,W
BTFSS STATUS,Z
goto increment

BSF output
BSF output
BSF output...
goto end

no_act Delay 3+n
goto end

increment INCF counter_file,F

end BCF input_state
BCF prev_edge
BTFSC input_state
BSF prev_edge



counter auto reset: (cycle=15+n)


BTFSS prev_edge
BTFSS input_state
goto no_act

INCF counter_file,F
MOVLW up_to
XORFW counterfile,W
BTFSC STATUS,Z
goto SKIP

CLRF counter_file
BSF outputs
BSF outputs
BSF outputs...
goto end

no_act Delay 5+n
goto end

skip Delay n+2

end BCF input_state
BCF prev_edge
BTFSC input_state
BSF prev_edge


switch: (cycle= 6+n)
BTFSC input_state 
BTFSS read_flag #if inverter change to BTFSC

goto skip
BSF outputs
BSF outputs...
goto end
skip Delay n+1

end BCF input_state


genrator: (cycle= 4+n)
BTFSS Flag_name #if inverter change to BTFSC
goto skip

BSF outputs
BSF outputs...
goto end
skip Delay 1+n
end

flag: (cycle= 4)
BCF Flagname
BTFSC input_state
BSF flagname
BCF input_state

source: (cycle= n)
BSF output
BSF outputs ...

#1 cycle delay
NOP

#2 cycle delay
NOP
NOP

#3 cycle delay
NOP
NOP
NOP

#4 cycle delay
call small_delay_4

#5 cycle delay
call small_delay_5

#6 cycle delay
call small_delay_6

#7 cycle delay
Movlw 0
call delay3_1

#8 cycle delay
Movlw 0
call delay3_2

#9 cycle delay
Movlw 0
call delay3_3

#10 cycle delay
Movlw 1
call delay3_1


small_delay_6 nop
small_delay_5 nop
small_delay_4 return


delay3_3 Nop
delay3_2 Nop
delay3_1 Decfsz w,w
goto delay1_0
return